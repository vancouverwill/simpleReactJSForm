<!DOCTYPE html>
<html>
  <head>
    <title>Hello React</title>

    <link rel="stylesheet" href="thirdparty/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="css/cumul8form.css" type="text/css" />
    <link rel="stylesheet" href="css/spinner.css" type="text/css" />

    <!-- Not present in the tutorial. Just for basic styling. -->
    <script src="thirdparty/react.0.12.2.js"></script>
    <!-- <script src="js/react-bootstrap.js"></script> -->
    <script src="thirdparty/JSXTransformer.0.12.2.js"></script>
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.12.2/JSXTransformer.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/0.3.1/showdown.min.js"></script>-->

    <script type="text/javascript" src="thirdparty/jquery.min.js" charset="utf-8"></script>
    <script type="text/javascript" src="thirdparty/bootstrap.js" charset="utf-8"></script>
    

  <!--   <link rel="stylesheet" href="css/bootstrap.css" />
    <link rel="stylesheet" href="css/bootstrap-theme.css" /> -->
  </head>
  <body>

  <!-- <div id="container"> -->
    <div id="loading">
    <div id="facebookG">
      <div id="blockG_1" class="facebook_blockG">
      </div>
      <div id="blockG_2" class="facebook_blockG">
      </div>
      <div id="blockG_3" class="facebook_blockG">
      </div>
    </div>
    </div>

      <div id="container">
      </div>

  
     
    <script type="text/jsx">

      var ExampleForm = React.createClass({
        handleEmailChange: function() {
          var email= event.target.value;
          this.props.handleEmailChanges(email);
        },
        handleTimeChange: function() {
          var time = event.target.value;

          this.props.handleHourChanges(time);
          this.props.handleMinuteChanges(time);
        },
        handleNextSubmit: function(event) {
          event.preventDefault();

          var that = this;

          jQuery("#loading").show();
          setTimeout(function(temp){ 
            jQuery("#loading").hide();
            that.props.handleFormSubmitButton();
            // that.props.handleTitleUpdate();
             }, 1000);
          
        },
        render: function() {
          return (
            <div id="form-inputs">
              <form id="cumul8Form"   onSubmit={this.handleNextSubmit} >
                <div className="form-group">
                  <label for="cumul8Email">Email</label>
                  <input className="form-control" id="cumul8Email" type="email" placeholder="enter email address here" value={this.props.email}  onChange={this.handleEmailChange} title="Please fill out this email field" required/>

                  <label for="cumul8Time">Time</label>
                  <input className="form-control" id="cumul8Time" type="text" placeholder="exp. 12 hours 5 minutes" value={this.props.hours} onChange={this.handleTimeChange}  title="Please fill out hours and/or minutes exp (8 hours 5 minutes)" pattern="\s?(\d{1,2}\s((H|h)ours))?\s?(\d{1,2}\s(M|minutes))?" required/>

                  <label for="cumul8Message">Message (Optional)</label>
                  <textarea className="form-control" id="cumul8Message" rows="3"></textarea>
                </div>

                   <label for="timeButtons">What type of work is this for?</label>
                   <div id="timeButtons" className="btn-group" data-toggle="buttons">
                      <label className="btn btn-primary">
                        <input type="radio" name="options" id="option1" autocomplete="off" />Time working on visual effects for movie
                      </label>
                      <label className="btn btn-primary">
                        <input type="radio" name="options" id="option2" autocomplete="off"/>Time spent reviewing the work of a junior artist
                      </label>  
                   </div>
              </form>
            </div>
            );
        }
      });



      var ExampleFormResult = React.createClass({
        render: function() {
          return (
            <div id="form-inputs">
              <br/>
              <p>Thank you <b>{this.props.email}</b></p>
              <p>You have logged <b>{this.props.hours}</b></p>
            </div>
          );
        }
      });



      var HeaderTag = React.createClass({
        getInitialState: function() {
          return {data: []};
        },
        render: function() {
          return (
              <header id="title">
                <h1>{this.props.title}</h1>
              </header>
            );
        }
      });

      

      var SubmitButtons = React.createClass({
        handleClearSubmit: function() {
          console.log("handleNextSubmit");
          this.props.handleClearSubmitButton();
        },
        render: function() {
          return (
            <div id="form-buttons">
              <div className="form-group">
                <input className="btn btn-default"  onClick={this.handleClearSubmit} value="Clear"/>
                <input form="cumul8Form"  className="btn btn-default" type="submit"value="Next"/>
              </div>
            </div>
            );
        }
      });



      var ReturnButton = React.createClass({
        handleReturnSubmit: function() {
          console.log("handleReturnSubmit");
          this.props.handleReturnSubmitButton();
        },
        render: function() {
          return (
            <div id="form-buttons">
              <div className="form-group">
                <input className="btn btn-default" type="submit"  onClick={this.handleReturnSubmit} value="Start Again"/>
              </div>
            </div>
            );
        }
      });


      var Cumul8FormContainer = React.createClass({
        getInitialState: function() {
          return {
            title: "Submit TimeSheet",
            email: "",
            hours: "",
            minutes: "",
          };
        },
        mySample: function() {
          var app = <div id="actionableItems">
              <HeaderTag title={this.state.title} />
              <ExampleForm  handleFormSubmitButton={this.handleFormFinished} email={this.state.email} hours={this.state.hours} minutes={this.state.minutes} handleEmailChanges={this.updateEmail} handleHourChanges={this.updateHours} handleMinuteChanges={this.updateMinutes} />
              <SubmitButtons handleClearSubmitButton={this.clearContent}/>
            </div>;

          return (
            app
          );
        },
        render: function() {
          // var app = <div id="actionableItems">
          //     <HeaderTag />
          //     <ExampleForm  email={this.state.email} hours={this.state.hours} minutes={this.state.minutes} handleEmailChanges={this.updateEmail} handleHourChanges={this.updateHours} handleMinuteChanges={this.updateMinutes} />
          //     <SubmitButtons handleNextSubmitButton={this.handleFormFinished} handleClearSubmitButton={this.clearContent}/>
          //   </div>;

          // return (
          //   app
          // );
          return this.mySample();
        },
        handleFormFinished: function() {
          // e.preventDefault();
          console.log("handleFormFinished");


          // console.log(this);
          React.render(
            <div id="actionableItems">
              <HeaderTag title={"Title Submitted"} />
              <ExampleFormResult email={this.state.email} hours={this.state.hours} minutes={this.state.minutes} />
              <ReturnButton  handleReturnSubmitButton={this.handleFormReset}/>
            </div>  
         ,
          document.getElementById('container')
          );
        },
        handleFormTitleUpdate: function() {
          this.setState({title : "Timesheet Submitted"})
        },
        handleFormReset: function() {
          var temp = React.unmountComponentAtNode(document.getElementById('container'));
          React.render(
          <Cumul8FormContainer />,
            document.getElementById('container')
          );

         //  this.clearContent();

         //   React.render(
         //    <div id="actionableItems">
         //      <HeaderTag />
         //      <ExampleForm  email={this.state.email} hours={this.state.hours} minutes={this.state.minutes} handleEmailChanges={this.updateEmail} handleHourChanges={this.updateHours} handleMinuteChanges={this.updateMinutes} />
         //      <SubmitButtons handleNextSubmitButton={this.handleFormFinished} handleClearSubmitButton={this.clearContent}/>
         //    </div>
         //    // this.mySample()
         // ,
         //  document.getElementById('container')
         //  );
         },
         updateEmail: function(email) {
            this.setState({email: email});
         }, 
         updateHours: function(time) {
            this.setState({hours: time});
         }, 
         updateMinutes: function(time) {
            this.setState({minutes: time});
         }, 
         clearContent :function() {
          this.setState({email: null, hours: null, minutes : null});
         }
     });
      
      
      React.render(
        // <ExampleFormResult />,
        // <ExampleForm />,
        
          <Cumul8FormContainer />,
        document.getElementById('container')
      );

      // if (typeof window !== 'undefined') {
      //     window.React = React;
      // }


      
      /*  React.render(
      //   ,
      //   document.getElementById('buttons')
      // );*/
    </script>
  </body>
</html>